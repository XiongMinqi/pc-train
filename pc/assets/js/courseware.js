(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["courseware"],{"9c61":function(e,i,t){"use strict";t.r(i);var a=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"choose"},[a("div",{staticClass:"classname"},[a("el-select",{attrs:{placeholder:"请选择科目"},model:{value:e.classname,callback:function(i){e.classname=i},expression:"classname"}},[a("el-option",{key:"",attrs:{value:"不限"}}),e._l(e.classList,(function(e){return a("el-option",{key:e.key,attrs:{value:e.value}})}))],2)],1),a("div",{staticClass:"classname"},[a("el-select",{attrs:{placeholder:"请选择文档类型"},model:{value:e.typename,callback:function(i){e.typename=i},expression:"typename"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.key,attrs:{value:e.value}})})),1)],1),a("div",{staticClass:"classname"},[a("el-input",{attrs:{placeholder:"请输入课件名"},model:{value:e.courseName,callback:function(i){e.courseName=i},expression:"courseName"}})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.chooseClass}},[e._v("开始筛选")])],1)]),e.showCourse?a("div",[e.allList.length>0?a("div",[e.textList.length>0?a("div",[a("el-divider",[e._v("文档")]),e._l(e.textList,(function(i,s){return a("div",{key:s,staticClass:"course",on:{click:function(t){return e.checkcourse(i)}}},[a("div",{staticClass:"courseware",attrs:{slot:"reference"},slot:"reference"},[a("div",[".docx"==i.fileSuffix||".doc"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("3b84"),alt:""}})]):".xls"==i.fileSuffix||".xlsx"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("b792"),alt:""}})]):".ppt"==i.fileSuffix||".pptx"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("6358"),alt:""}})]):".mp4"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("5c0e"),alt:""}})]):".pdf"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("77ef"),alt:""}})]):".jpg"==i.fileSuffix||".png"==i.fileSuffix||".gif"==i.fileSuffix||".tif"==i.fileSuffix||".psd"==i.fileSuffix||".dng"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("3d38"),alt:""}})]):".wma"==i.fileSuffix||".mp3"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("e904"),alt:""}})]):a("div",[a("img",{attrs:{src:t("01ac"),alt:""}})])]),a("div",[a("div",{staticClass:"msg"},[a("div",[e._v("课件名称: "+e._s(i.name))])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v("作者: "+e._s(i.author))])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v("上传时间: "+e._s(i.uploadTime))])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v("文件大小: "+e._s(i.fileSize)+"KB")])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v(" "+e._s(i.majorName)+"/"+e._s(i.subjectName)+"/浏览 "),a("span",{staticStyle:{padding:"0 4px"}},[e._v(e._s(i.readCount))]),e._v("次 ")])])])])])}))],2):e._e(),e.pictureList.length>0?a("div",[a("el-divider",[e._v("图片、视频、音频")]),e._l(e.pictureList,(function(i,s){return a("div",{key:s,staticClass:"course",on:{click:function(t){return e.checkcourse(i)}}},[a("div",{staticClass:"courseware",attrs:{slot:"reference"},slot:"reference"},[a("div",[".docx"==i.fileSuffix||".doc"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("3b84"),alt:""}})]):".xls"==i.fileSuffix||".xlsx"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("b792"),alt:""}})]):".ppt"==i.fileSuffix||".pptx"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("6358"),alt:""}})]):".mp4"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("5c0e"),alt:""}})]):".pdf"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("77ef"),alt:""}})]):".jpg"==i.fileSuffix||".png"==i.fileSuffix||".gif"==i.fileSuffix||".tif"==i.fileSuffix||".psd"==i.fileSuffix||".dng"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("3d38"),alt:""}})]):".wma"==i.fileSuffix||".mp3"==i.fileSuffix?a("div",[a("img",{attrs:{src:t("e904"),alt:""}})]):a("div",[a("img",{attrs:{src:t("01ac"),alt:""}})])]),a("div",[a("div",{staticClass:"msg"},[a("div",[e._v("课件名称: "+e._s(i.name))])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v("作者: "+e._s(i.author))])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v("上传时间: "+e._s(i.uploadTime))])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v("文件大小: "+e._s(i.fileSize)+"KB")])]),a("div",{staticClass:"desc",staticStyle:{"font-size":"12px"}},[a("div",[e._v(" "+e._s(i.majorName)+"/"+e._s(i.subjectName)+"/浏览 "),a("span",{staticStyle:{padding:"0 4px"}},[e._v(e._s(i.readCount))]),e._v("次 ")])])])])])}))],2):e._e(),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[9,6,12,15,18],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]):a("div",{staticClass:"else"})]):e._e(),a("el-dialog",{staticClass:"dialogVisible",attrs:{width:"90%",top:"1vh",title:e.courseTitle,visible:e.dialogVisible,"close-on-click-modal":!1,"show-close":!1,"modal-append-to-body":!0},on:{close:e.close,open:e.open,"update:visible":function(i){e.dialogVisible=i}}},[a("div",[e.videoPlayer?a("div",{staticClass:"vueVideoPlayer"},[a("vueVideoPlayer",{attrs:{src:e.videoPlayer,cover_url:e.openVideoImg}})],1):e._e(),e.pdfUrl?a("div",{staticStyle:{height:"70vh"}},[a("iframe",{staticClass:"filename",attrs:{src:e.pdfUrl,width:"100%",height:"100%",frameborder:"0"}})]):e._e(),e.wordUrl?a("div",{staticStyle:{height:"70vh"}},[a("iframe",{staticClass:"filename",attrs:{src:e.wordUrl,width:"100%",height:"100%",frameborder:"0"}})]):e._e(),e.audioUrl.length>0?a("div",{staticStyle:{height:"60vh"}},[a("AudioPlayer",{attrs:{"audio-list":e.audioUrl,"show-prev-button":!1,"show-next-button":!1,isLoop:!1,progressInterval:10}})],1):e._e(),e.pictureUrl?a("div",{staticStyle:{height:"70vh"}},[a("img",{attrs:{src:e.pictureUrl,alt:""}})]):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(i){e.dialogVisible=!1}}},[e._v("确 定")])],1)])])],1)},s=[],l=(t("c975"),t("d81d"),t("fb6a"),t("b0c0"),t("a9e3"),t("d3b7"),t("25f0"),t("5dc6")),r=(t("fda2"),t("ac8a")),o=(t("c610"),{data:function(){return{showCourse:!1,videoPlayer:"",currentPage:1,total:0,pdfUrl:"",audioUrl:[],wordUrl:"",courseTitle:"",pictureUrl:"",dialogVisible:!1,subjectname:"",coursewareId:"",peopleId:"",classname:"不限",beginTime:"",courseName:"",endTime:"",classList:[],typeList:[{key:null,value:"不限"},{key:1,value:"文档"},{key:2,value:"图片"},{key:3,value:"视频"},{key:4,value:"音频"}],typename:"不限",subjectList:[],data:{object:{subjectId:null,type:null,name:null,majorId:null,authorDepartment:null,author:null},limit:9,page:1},allList:[],visible:!1,textList:[],pictureList:[],loading:!0}},components:{vueVideoPlayer:l["a"],AudioPlayer:r["AudioPlayer"]},methods:{handleSizeChange:function(e){this.loading=!0,this.data.page=1,this.data.limit=e,this.getAllLearn()},handleCurrentChange:function(e){this.loading=!0,this.data.page=e,this.getAllLearn()},open:function(){this.beginTime="",this.endTime="",this.beginTime=Date.parse(new Date)},close:function(){this.courseTitle="",this.wordUrl="",this.pdfUrl="",this.videoPlayer="",this.pictureUrl="",this.audioUrl=[],this.endTime=Date.parse(new Date);var e=Math.round((this.endTime-this.beginTime)/6e4);if(e>=1){var i={coursewareId:this.coursewareId,minutes:e};this.$api.saveMyLog(i).then().catch()}},chooseClass:function(){var e=this;this.data.page=1,"不限"==this.classname?this.data.object.subjectId="":this.classList.map((function(i){i.value==e.classname&&(e.data.object.subjectId=i.key)})),this.typeList.map((function(i){i.value==e.typename&&(e.data.object.type=i.key)})),""!==this.courseName?this.data.object.name=this.courseName:""===this.courseName&&(this.data.object.name=null),this.getAllLearn()},checkcourse:function(e){var i=this;this.courseTitle=e.name,this.coursewareId=e.id,this.wordUrl="",this.pdfUrl="",this.videoPlayer="",this.pictureUrl="",this.audioUrl=[],this.$api.geturl(e.id).then((function(t){1e3===t.data.code&&i.$router.push({name:"login",path:"/login"}),0===t.data.code?".docx"===e.fileSuffix||".doc"===e.fileSuffix||".xls"===e.fileSuffix||".xlsx"===e.fileSuffix||".ppt"===e.fileSuffix||".pptx"===e.fileSuffix?(i.wordUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.data.data[0]),i.dialogVisible=!0):".mp4"===e.fileSuffix?(e.coverUrl?i.openVideoImg=e.coverUrl:i.openVideoImg="",i.videoPlayer=t.data.data[0],i.dialogVisible=!0):".pdf"===e.fileSuffix?(i.pdfUrl=t.data.data[0],i.dialogVisible=!0):".mp3"===e.fileSuffix?(i.audioUrl.push(t.data.data[0]),i.dialogVisible=!0):".jpg"!=e.fileSuffix&&".png"!=e.fileSuffix&&".gif"!=e.fileSuffix&&".tif"!=e.fileSuffix&&".psd"!=e.fileSuffix&&".dng"!=e.fileSuffix||(i.pictureUrl=t.data.data[0],i.dialogVisible=!0):i.$message({message:t.data.msg,type:"warning"})})).catch((function(e){}))},twoNumber:function(e){var i=e.toString();if(-1==i.indexOf("."))return e+".00";var t=i.length,a=i.indexOf(".");return t>a+2?i.slice(0,a+3):t==a+2?i+"0":i},getdict:function(){var e=this;this.$grade.getdict().then((function(i){1e3===i.data.code&&e.$router.push({name:"login",path:"/login"}),0===i.data.code?(e.classList=i.data.data[0]["科目名称"],e.subjectList=i.data.data[0]["专业名称"],e.getAllLearn()):e.$message({message:i.data.msg,type:"warning"})})).catch((function(e){}))},getAllLearn:function(){var e=this;this.$api.getLearn(this.data).then((function(i){e.loading=!1,e.showCourse=!0,1e3===i.data.code&&e.$router.push({name:"login",path:"/login"}),0===i.data.code?(e.allList=i.data.data,e.total=i.data.count,e.textList=[],e.pictureList=[],e.allList.map((function(i){i.uploadTime=e.timeFormat(i.uploadTime),i.fileSize=e.twoNumber(i.fileSize/1024),e.subjectList.map((function(t){i.majorId===Number(t.key)&&e.$set(i,"majorName",t.value)})),e.classList.map((function(t){i.subjectId===Number(t.key)&&e.$set(i,"subjectName",t.value)})),".jpg"===i.fileSuffix||".png"===i.fileSuffix||".jpeg"===i.fileSuffix||".bmp"===i.fileSuffix||".gif"===i.fileSuffix||".wmv"===i.fileSuffix||".avi"===i.fileSuffix||".rm"===i.fileSuffix||".flv"===i.fileSuffix||".mp4"===i.fileSuffix||".wma"===i.fileSuffix||".mp3"===i.fileSuffix?e.pictureList.push(i):e.textList.push(i)}))):e.$message({message:i.data.msg,type:"warning"})})).catch((function(i){e.loading=!1,e.showCourse=!0}))}},mounted:function(){this.getdict();var e=JSON.parse(localStorage.getItem("userInfo"));this.peopleId=e.userId},watch:{},computed:{}}),c=o,f=(t("d177"),t("2877")),n=Object(f["a"])(c,a,s,!1,null,"42067502",null);i["default"]=n.exports},b0c0:function(e,i,t){var a=t("83ab"),s=t("9bf2").f,l=Function.prototype,r=l.toString,o=/^\s*function ([^ (]*)/,c="name";a&&!(c in l)&&s(l,c,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(e){return""}}})},b24c:function(e,i,t){},d177:function(e,i,t){"use strict";var a=t("b24c"),s=t.n(a);s.a}}]);