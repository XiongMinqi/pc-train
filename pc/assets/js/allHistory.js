(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["allHistory"],{"4b67":function(t,e,a){t.exports=a.p+"assets/img/voice.png"},"8c71":function(t,e,a){},b41a:function(t,e,a){t.exports=a.p+"assets/img/unvoice.png"},b727:function(t,e,a){var i=a("0366"),n=a("44ad"),s=a("7b0b"),c=a("50c4"),r=a("65f0"),o=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,d=4==t,u=6==t,g=5==t||u;return function(h,p,f,v){for(var m,w,C=s(h),b=n(C),_=i(p,f,3),x=c(b.length),k=0,y=v||r,L=e?y(h,x):a?y(h,0):void 0;x>k;k++)if((g||k in b)&&(m=b[k],w=_(m,k,C),t))if(e)L[k]=w;else if(w)switch(t){case 3:return!0;case 5:return m;case 6:return k;case 2:o.call(L,m)}else if(d)return!1;return u?-1:l||d?d:L}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d03d:function(t,e,a){"use strict";var i=a("8c71"),n=a.n(i);n.a},d81d:function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").map,s=a("1dde"),c=a("ae40"),r=s("map"),o=c("map");i({target:"Array",proto:!0,forced:!r||!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e44e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"backLastPage",on:{click:t.backLastPage}},[a("i",{staticClass:"el-icon-arrow-left"}),t._v("返回 ")]),t.showNews?a("div",[t.newsList.length>0?a("div",t._l(t.newsList,(function(e,i){return a("div",{key:i,on:{click:function(a){return t.checkNewsDetail(e)}}},[a("div",{staticClass:"flex newsDetail"},[t._m(0,!0),a("div",{staticClass:"newsInfo"},[a("div",{staticClass:"flex aligh-center"},[a("div",{staticStyle:{"margin-right":"10px","font-size":"13px",color:"darkcyan"}},[e.type<=1e3?a("div",[t._v("【系统通知】")]):a("div",[t._v("【其他通知】")])]),a("div",{staticClass:"title"},[t._v(t._s(e.title))])]),a("div",{staticStyle:{"font-size":"13px",color:"#a2a2a2","padding-left":"6px","padding-top":"3px"}},[t._v(t._s(e.msg))]),a("div",{staticClass:"content"},[t._v(t._s(e.content))])])])])})),0):a("div",{staticClass:"else"})]):t._e(),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"unvoice"},[i("img",{attrs:{src:a("b41a"),alt:""}})]),i("div",{staticClass:"voice"},[i("img",{attrs:{src:a("4b67"),alt:""}})])])}],s=(a("d81d"),{data:function(){return{showNews:!1,page:1,limit:10,loading:!0,total:0,currentPage:1,newsList:[]}},components:{},methods:{backLastPage:function(){this.$router.go(-1)},handleSizeChange:function(t){this.loading=!0,this.page=1,this.limit=t,this.getAllList()},handleCurrentChange:function(t){this.loading=!0,this.page=t,this.getAllList()},checkNewsDetail:function(t){this.$router.push({name:"unReadNews",path:"/unReadNews",query:{id:t.id,flag:!1}})},changTime:function(t){var e=Date.parse(new Date(t)),a=Date.parse(new Date),i=Math.ceil((a-e)/6e4),n="";return i<1?(n="刚刚",n):i<=60?(n=i+"分钟前",n):i<=1440?(n=Math.ceil(i/60)-1+"小时前",n):i<=43200?(n=Math.ceil(i/60/24)-1+"天前",n):i<=518400?(n=Math.ceil(i/60/24/30)-1+"月前",n):(n="更早",n)},getAllList:function(){var t=this,e={limit:this.limit,page:this.page,object:null};this.$api.checkHistory(e).then((function(e){t.loading=!1,t.showNews=!0,1e3===e.data.code&&t.$router.push({name:"login",path:"/login"}),0===e.data.code?(t.total=e.data.count,t.newsList=e.data.data,t.newsList.map((function(e){var a=t.changTime(e.createTime);t.$set(e,"msg",a)}))):t.$message({message:e.data.msg,type:"warning"})})).catch((function(e){t.loading=!1,t.showNews=!0}))}},mounted:function(){this.getAllList()},watch:{},computed:{}}),c=s,r=(a("d03d"),a("2877")),o=Object(r["a"])(c,i,n,!1,null,"de1ecd22",null);e["default"]=o.exports}}]);